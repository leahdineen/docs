---
title: 'video_matching'
description: 'Detects source video clip patterns using multi-embedder alignment against precomputed reference features'
---

## Overview

The `video_matching` detector analyzes video content against reference videos to detect matches or similarities. It uses multi-embedder alignment techniques and precomputed reference features for accurate content matching.

**Requires preprocessing** - Reference videos must be processed before evaluation can begin.

## Configuration

<ParamField body="config.reference_videos" type="array" required>
  Array of GCS URIs of reference videos to match against
  
  **Allowed extensions:** mp4, mov, avi, mkv, webm
</ParamField>

## Example Configuration

```json
{
  "detector_name": "video_matching",
  "config": {
    "reference_videos": [
      "gs://judge-artifacts/org_123/reference_uploads/abc/reference1.mp4",
      "gs://judge-artifacts/org_123/reference_uploads/def/reference2.mp4"
    ]
  }
}
```

## Result Schema

```json
{
  "detector_name": "video_matching",
  "pass_check": false,
  "score": 0.7,
  "rationale": "High similarity detected with reference content",
  "metrics": {
    "alignment_summary": {
      "max_similarity": 0.85,
      "total_matches": 3,
      "coverage_percentage": 42.3
    },
    "source_verdicts": [
      {
        "source_id": "reference1.mp4",
        "similarity_score": 0.85,
        "match_segments": [
          {
            "start_time": 15.2,
            "end_time": 28.7,
            "confidence": 0.9
          }
        ]
      }
    ],
    "matched_sources": [
      "gs://judge-artifacts/org_123/reference_uploads/abc/reference1.mp4"
    ]
  },
  "timestamps": [15.2, 28.7],
  "flagged_frames": [
    {
      "frame_index": 456,
      "similarity_score": 0.85,
      "reference_source": "reference1.mp4"
    }
  ],
  "execution_time_sec": 8.2,
  "api_cost_usd": null
}
```

## Preprocessing

Before using this detector, reference videos must be uploaded and preprocessed:

1. Upload reference videos using the `/v1/judges/reference_content` endpoint
2. Reference videos are processed to extract embeddings and features
3. Judge status will be `pending` until preprocessing completes
4. Once complete, judge status becomes `ready` and can be used for evaluations

## Interpreting Results

The video_matching detector compares video content against reference videos and returns:

- **Alignment Summary** - Overall matching statistics including maximum similarity and coverage percentage
- **Source Verdicts** - Analysis of each reference video with similarity scores and matched segments
- **Match Segments** - Specific time ranges where reference content appears with confidence scores  
- **Matched Sources** - Array of reference video URIs that had significant matches
- **Coverage Percentage** - Portion of the analyzed video that matches reference content