---
title: 'Detect CSV Columns'
api: 'POST /openai/detect-csv-columns'
description: 'Automatically detect and map CSV columns for bulk content import'
---

## Overview

Uses OpenAI to analyze CSV file structure and automatically detect column mappings for bulk content import. This helps streamline the process of importing large datasets for evaluation.

## Request Body

<ParamField body="csv_sample" type="string" required maxLength="10000">
  Sample rows from the CSV file (header + first few data rows)
</ParamField>

<ParamField body="expected_fields" type="array" required>
  Expected field types to map
  - `content` - Main content to evaluate
  - `title` - Content title
  - `description` - Content description
  - `category` - Content category
  - `metadata` - Additional metadata
  - `id` - External ID or reference
</ParamField>

<ParamField body="detection_options" type="object">
  Options for column detection
  
  <Expandable title="detection options">
    <ParamField body="confidence_threshold" type="number" default="0.7" min="0.1" max="1.0">
      Minimum confidence required for column mapping
    </ParamField>
    
    <ParamField body="suggest_transformations" type="boolean" default="true">
      Whether to suggest data transformations for better compatibility
    </ParamField>
  </Expandable>
</ParamField>

## Response

<ResponseField name="detected_columns" type="array" required>
  Detected column mappings
  
  <Expandable title="column properties">
    <ResponseField name="csv_column_name" type="string" required>
      Name of the column in CSV
    </ResponseField>
    
    <ResponseField name="csv_column_index" type="integer" required>
      Zero-based index of the column
    </ResponseField>
    
    <ResponseField name="mapped_field" type="string" required>
      Detected field type (content, title, description, etc.)
    </ResponseField>
    
    <ResponseField name="confidence" type="number" required>
      Detection confidence score (0.0 to 1.0)
    </ResponseField>
    
    <ResponseField name="sample_values" type="array" required>
      Sample values from this column
    </ResponseField>
    
    <ResponseField name="data_type" type="string" required>
      Detected data type (string, number, date, etc.)
    </ResponseField>
    
    <ResponseField name="suggested_transformations" type="array">
      Recommended transformations for this column
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="unmapped_columns" type="array">
  Columns that couldn't be mapped to expected fields
</ResponseField>

<ResponseField name="data_quality_insights" type="object" required>
  Insights about data quality
  
  <Expandable title="quality insights">
    <ResponseField name="estimated_rows" type="integer" required>
      Estimated number of data rows
    </ResponseField>
    
    <ResponseField name="potential_issues" type="array">
      Potential data quality issues detected
    </ResponseField>
    
    <ResponseField name="recommendations" type="array">
      Recommendations for data preparation
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="import_preview" type="object" required>
  Preview of how data would be imported
  
  <Expandable title="preview properties">
    <ResponseField name="sample_records" type="array" required>
      Sample records showing mapped data
    </ResponseField>
    
    <ResponseField name="estimated_success_rate" type="number" required>
      Estimated import success rate (0.0 to 1.0)
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="tokens_used" type="integer" required>
  Number of OpenAI tokens consumed
</ResponseField>

## Examples

<CodeGroup>

```bash Request
curl -X POST https://api.judge.example.com/openai/detect-csv-columns \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "csv_sample": "title,post_content,author,published_date,category\n\"Introduction to AI\",\"Artificial Intelligence is transforming...\",\"John Doe\",\"2024-01-15\",\"Technology\"\n\"Marketing Tips\",\"Here are 10 proven marketing strategies...\",\"Jane Smith\",\"2024-01-14\",\"Business\"",
    "expected_fields": ["content", "title", "category", "metadata"],
    "detection_options": {
      "confidence_threshold": 0.8,
      "suggest_transformations": true
    }
  }'
```

```json Success Response (200)
{
  "detected_columns": [
    {
      "csv_column_name": "title",
      "csv_column_index": 0,
      "mapped_field": "title",
      "confidence": 0.95,
      "sample_values": ["Introduction to AI", "Marketing Tips"],
      "data_type": "string",
      "suggested_transformations": []
    },
    {
      "csv_column_name": "post_content",
      "csv_column_index": 1,
      "mapped_field": "content",
      "confidence": 0.92,
      "sample_values": ["Artificial Intelligence is transforming...", "Here are 10 proven marketing strategies..."],
      "data_type": "string",
      "suggested_transformations": ["truncate_if_too_long"]
    },
    {
      "csv_column_name": "category",
      "csv_column_index": 4,
      "mapped_field": "category",
      "confidence": 0.88,
      "sample_values": ["Technology", "Business"],
      "data_type": "string",
      "suggested_transformations": ["normalize_case"]
    }
  ],
  "unmapped_columns": [
    {
      "csv_column_name": "author",
      "csv_column_index": 2,
      "reason": "Not in expected fields but could be useful metadata"
    },
    {
      "csv_column_name": "published_date",
      "csv_column_index": 3,
      "reason": "Date field - consider adding to metadata"
    }
  ],
  "data_quality_insights": {
    "estimated_rows": 2,
    "potential_issues": [
      "Sample size too small for comprehensive analysis",
      "Author and date fields not mapped - may contain useful metadata"
    ],
    "recommendations": [
      "Include author and published_date as metadata fields",
      "Provide larger sample for better detection accuracy",
      "Consider content length limits for evaluation"
    ]
  },
  "import_preview": {
    "sample_records": [
      {
        "title": "Introduction to AI",
        "content": "Artificial Intelligence is transforming...",
        "category": "Technology",
        "metadata": {
          "author": "John Doe",
          "published_date": "2024-01-15"
        }
      }
    ],
    "estimated_success_rate": 0.95
  },
  "tokens_used": 847
}
```

</CodeGroup>